(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{333:function(t,a,s){"use strict";s.r(a);var e=s(5),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("趁国庆这几天，帮实验室搭建了一下网络环境，弄好了一个可用的系统，感觉还是很有趣的，记录一下。")]),t._v(" "),a("h1",{attrs:{id:"突破设备限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#突破设备限制"}},[t._v("#")]),t._v(" 突破设备限制")]),t._v(" "),a("p",[t._v("校园网有一个很让我不能接受的限制，就是对设备的限制，一个校园网账户限制3个在线设备。\n不说实验设备，光我自己的设备，就不只3个了，这样的限制很苛刻，而且对于在线的判定也是有延迟的，每次都需要登录管理页面手动下线一个设备，这样的操作真的是很麻烦。")]),t._v(" "),a("p",[t._v("这次想搭建一个实验室的网络系统，就需要一个路由，来当作内网的网络终端，\n利用这个终端，自然也可以突破校园网的设置限制。")]),t._v(" "),a("p",[t._v("不过设备限制是突破了，但是带宽还是有些小，用的人多了的时候，可以想到网络会变得多慢。\n下一步考虑升级一下带宽吧。")]),t._v(" "),a("h1",{attrs:{id:"软路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#软路由"}},[t._v("#")]),t._v(" 软路由")]),t._v(" "),a("p",[t._v("也想着， 要不要弄一个软路由，这样的话，就可以进行更精细的设置，也可以全局上网。\n不过既然现在带宽都这么小，其实没有什么意义。")]),t._v(" "),a("h2",{attrs:{id:"树莓派"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#树莓派"}},[t._v("#")]),t._v(" 树莓派")]),t._v(" "),a("p",[t._v("正好手里有一个闲置的树莓派3B+，就拿来装了"),a("code",[t._v("Docker")]),t._v("和"),a("code",[t._v("OpenWRT")]),t._v("，作为旁路网关配合主路由来使用。")]),t._v(" "),a("p",[t._v("使用体验其实蛮好的，可以自定义DNS，过滤广告，全局上网。\n但可能是树莓派散热跟不上，运行一段时间后，会产生网络不稳定的情况发生。")]),t._v(" "),a("p",[t._v("考虑换4B或者是加一个散热模块吧。")]),t._v(" "),a("h1",{attrs:{id:"git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git"}},[t._v("#")]),t._v(" Git")]),t._v(" "),a("p",[t._v("Git还是很重要的，虽然自己搭了gitlab，但可能内网里的gitlab更方便些，速度，容量什么的。\n于是将gitlab加入到搭建的计划中。")]),t._v(" "),a("h2",{attrs:{id:"遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#遇到的问题"}},[t._v("#")]),t._v(" 遇到的问题")]),t._v(" "),a("p",[t._v("其实没有遇到什么大的问题，一方面有之前搭建的经验，过程很顺利，对整个系统的理解也深了\n另一方面，不用考虑处理URL，ssl，省了好多事。")]),t._v(" "),a("h2",{attrs:{id:"ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[t._v("#")]),t._v(" ssh")]),t._v(" "),a("p",[t._v("不过还是有一个问题，就是发现http可以用，但是ssh不行，\n原因是windows的文件系统和linux的不同，权限也不同，ssh认为可写的文件不安全，所以拒绝了访问。\n于是切换到了wsl下，更加稳定了一些。")]),t._v(" "),a("h1",{attrs:{id:"wiki"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wiki"}},[t._v("#")]),t._v(" Wiki")]),t._v(" "),a("p",[t._v("之前用Notion一直比较舒服，所以想着能不能找到一个类似Notion的self-hosted的应用，然后就找到了Outline"),a("sup",{staticClass:"footnote-ref"},[a("a",{attrs:{href:"#fn1",id:"fnref1"}},[t._v("[1]")])]),t._v("。\nOutline确实和Notion挺像的，感觉很好。\n而且，不仅仅可以自己搭建自用，而且开源的话，也可以好好学习一下Outline类似应用的架构。")]),t._v(" "),a("h2",{attrs:{id:"架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[t._v("#")]),t._v(" 架构")]),t._v(" "),a("p",[t._v("和直觉相同，Outline有如下的组件：")]),t._v(" "),a("ol",[a("li",[t._v("Fronted ｜ React")]),t._v(" "),a("li",[t._v("Backend | Koa")]),t._v(" "),a("li",[t._v("Databse | PostgreSQL")]),t._v(" "),a("li",[t._v("Cache | redis")]),t._v(" "),a("li",[t._v("Object Storage | Minio")])]),t._v(" "),a("p",[t._v("搭建时完全docker化，还是比较整在的。")]),t._v(" "),a("h2",{attrs:{id:"问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("遇到的问题，都是由于docker使用不熟练，网络，存储方面的问题，所以还好，学习一下就好了。")]),t._v(" "),a("h1",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" Nginx")]),t._v(" "),a("p",[t._v("服务多了起来，一直访问端口还是不太优雅，所以利用nginx来反代。\n之前也折腾了很长时间nginx，所以这次还算顺利。\n就是很简单的反代。")]),t._v(" "),a("h1",{attrs:{id:"nextcloud"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nextcloud"}},[t._v("#")]),t._v(" NextCloud")]),t._v(" "),a("p",[t._v("想了想，还是加入了网盘的功能，从 owncloud 和 nextcloud 中选择了较新的 nextcloud，虽然是内网的网盘\n但也许共享和保存一些资料的话会比较方便吧。")]),t._v(" "),a("h1",{attrs:{id:"一些想法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一些想法"}},[t._v("#")]),t._v(" 一些想法")]),t._v(" "),a("p",[t._v("这件事，其实还是偏实践的，做一遍会有新的感受。\n包括自己平时看到的一些理论，只有实践才能加深自己的印象啊。")]),t._v(" "),a("hr",{staticClass:"footnotes-sep"}),t._v(" "),a("section",{staticClass:"footnotes"},[a("ol",{staticClass:"footnotes-list"},[a("li",{staticClass:"footnote-item",attrs:{id:"fn1"}},[a("p",[a("a",{attrs:{href:"https://github.com/outline/outline",target:"_blank",rel:"noopener noreferrer"}},[t._v("An open, extensible, wiki"),a("OutboundLink")],1),t._v(" "),a("a",{staticClass:"footnote-backref",attrs:{href:"#fnref1"}},[t._v("↩︎")])])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);